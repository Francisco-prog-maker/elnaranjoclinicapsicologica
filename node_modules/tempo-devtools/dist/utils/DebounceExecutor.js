"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DebounceExecutor = void 0;
const TIME_PER_FRAME_MS = 16; // One frame at 60fps
class DebounceExecutor {
    constructor() {
        this.animationFrameId = null;
    }
    /**
     * Schedules a task to be executed using requestAnimationFrame.
     * If there's already a pending task, it will be replaced with the new one.
     * @param task The callback function to be executed
     * @param timeoutMs Optional timeout in milliseconds for warning (default: 16ms)
     */
    schedule(task) {
        // Cancel any existing animation frame
        if (this.animationFrameId !== null) {
            cancelAnimationFrame(this.animationFrameId);
        }
        this.animationFrameId = requestAnimationFrame(() => {
            const startTime = performance.now();
            task();
            const duration = performance.now() - startTime;
            // if (duration > TIME_PER_FRAME_MS) {
            //   console.warn(`Took ${duration.toFixed(2)}ms to execute, which may affect app responsiveness`);
            // }
            this.animationFrameId = null;
        });
    }
}
exports.DebounceExecutor = DebounceExecutor;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVib3VuY2VFeGVjdXRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9EZWJvdW5jZUV4ZWN1dG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLE1BQU0saUJBQWlCLEdBQUcsRUFBRSxDQUFDLENBQUMscUJBQXFCO0FBRW5ELE1BQWEsZ0JBQWdCO0lBQTdCO1FBQ1UscUJBQWdCLEdBQWtCLElBQUksQ0FBQztJQXdCakQsQ0FBQztJQXRCQzs7Ozs7T0FLRztJQUNILFFBQVEsQ0FBQyxJQUFnQjtRQUN2QixzQ0FBc0M7UUFDdEMsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEtBQUssSUFBSSxFQUFFO1lBQ2xDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQzdDO1FBRUQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLHFCQUFxQixDQUFDLEdBQUcsRUFBRTtZQUNqRCxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDcEMsSUFBSSxFQUFFLENBQUM7WUFDUCxNQUFNLFFBQVEsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsU0FBUyxDQUFDO1lBQy9DLHNDQUFzQztZQUN0QyxtR0FBbUc7WUFDbkcsSUFBSTtZQUNKLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUF6QkQsNENBeUJDIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBUSU1FX1BFUl9GUkFNRV9NUyA9IDE2OyAvLyBPbmUgZnJhbWUgYXQgNjBmcHNcblxuZXhwb3J0IGNsYXNzIERlYm91bmNlRXhlY3V0b3Ige1xuICBwcml2YXRlIGFuaW1hdGlvbkZyYW1lSWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZXMgYSB0YXNrIHRvIGJlIGV4ZWN1dGVkIHVzaW5nIHJlcXVlc3RBbmltYXRpb25GcmFtZS5cbiAgICogSWYgdGhlcmUncyBhbHJlYWR5IGEgcGVuZGluZyB0YXNrLCBpdCB3aWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIG5ldyBvbmUuXG4gICAqIEBwYXJhbSB0YXNrIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBleGVjdXRlZFxuICAgKiBAcGFyYW0gdGltZW91dE1zIE9wdGlvbmFsIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIGZvciB3YXJuaW5nIChkZWZhdWx0OiAxNm1zKVxuICAgKi9cbiAgc2NoZWR1bGUodGFzazogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIC8vIENhbmNlbCBhbnkgZXhpc3RpbmcgYW5pbWF0aW9uIGZyYW1lXG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCAhPT0gbnVsbCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25GcmFtZUlkKTtcbiAgICB9XG5cbiAgICB0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICB0YXNrKCk7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgLy8gaWYgKGR1cmF0aW9uID4gVElNRV9QRVJfRlJBTUVfTVMpIHtcbiAgICAgIC8vICAgY29uc29sZS53YXJuKGBUb29rICR7ZHVyYXRpb24udG9GaXhlZCgyKX1tcyB0byBleGVjdXRlLCB3aGljaCBtYXkgYWZmZWN0IGFwcCByZXNwb25zaXZlbmVzc2ApO1xuICAgICAgLy8gfVxuICAgICAgdGhpcy5hbmltYXRpb25GcmFtZUlkID0gbnVsbDtcbiAgICB9KTtcbiAgfVxufSBcbiJdfQ==